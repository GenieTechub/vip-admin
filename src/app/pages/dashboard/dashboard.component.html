<div class="dashboard-container">
  <div class="page-header">
    <h1>Dashboard</h1>
    <p>Welcome to your admin dashboard</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <mat-card class="stat-card users-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon">
            <mat-icon>people</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ stats.totalUsers | number }}</h3>
            <p>Total Users</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card products-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon">
            <mat-icon>inventory</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ stats.totalProducts | number }}</h3>
            <p>Total Products</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card orders-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon">
            <mat-icon>shopping_cart</mat-icon>
          </div>
          <div class="stat-info">
            <h3>{{ stats.totalOrders | number }}</h3>
            <p>Total Orders</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card revenue-card">
      <mat-card-content>
        <div class="stat-content">
          <div class="stat-icon">
            <mat-icon>attach_money</mat-icon>
          </div>
          <div class="stat-info">
            <h3>${{ stats.totalRevenue | number:'1.2-2' }}</h3>
            <p>Total Revenue</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Recent Orders and Top Products -->
  <div class="content-grid">
    <!-- Recent Orders -->
    <mat-card class="recent-orders-card">
      <mat-card-header>
        <mat-card-title>Recent Orders</mat-card-title>
        <mat-card-subtitle>Latest customer orders</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="loading" class="loading-container">
          <mat-spinner></mat-spinner>
        </div>
        
        <div *ngIf="!loading && recentOrders.length === 0" class="no-data">
          <mat-icon>shopping_cart</mat-icon>
          <p>No recent orders</p>
        </div>

        <div *ngIf="!loading && recentOrders.length > 0" class="orders-list">
          <div *ngFor="let order of recentOrders" class="order-item">
            <div class="order-info">
              <span class="order-id">#{{ order.id }}</span>
              <span class="customer-name">{{ order.customerName }}</span>
            </div>
            <div class="order-details">
              <span class="order-amount">${{ order.total | number:'1.2-2' }}</span>
              <mat-chip-set>
                <mat-chip [ngClass]="'status-' + order.status">
                  {{ order.status | titlecase }}
                </mat-chip>
              </mat-chip-set>
            </div>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" routerLink="/orders">View All Orders</button>
      </mat-card-actions>
    </mat-card>

    <!-- Top Products -->
    <mat-card class="top-products-card">
      <mat-card-header>
        <mat-card-title>Top Products</mat-card-title>
        <mat-card-subtitle>Best selling products</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="loading" class="loading-container">
          <mat-spinner></mat-spinner>
        </div>
        
        <div *ngIf="!loading && topProducts.length === 0" class="no-data">
          <mat-icon>inventory</mat-icon>
          <p>No products data</p>
        </div>

        <div *ngIf="!loading && topProducts.length > 0" class="products-list">
          <div *ngFor="let product of topProducts" class="product-item">
            <div class="product-image">
              <img [src]="product.imageUrl || 'assets/images/no-image.png'" 
                   [alt]="product.name"
                   onerror="this.src='assets/images/no-image.png'">
            </div>
            <div class="product-info">
              <span class="product-name">{{ product.name }}</span>
              <span class="product-sales">{{ product.salesCount }} sold</span>
            </div>
            <div class="product-price">
              ${{ product.price | number:'1.2-2' }}
            </div>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" routerLink="/products">View All Products</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
